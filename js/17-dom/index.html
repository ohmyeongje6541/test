<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- axios CDN 링크 -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <title>Document</title>
</head>
<body>
  <div id="parent">

  </div>
  <script>
    const DOMAIN_NAME = "https://dummyjson.com"

    // id가 parent인 요소를 선택
    const parentTag = document.querySelector("#parent")

    // 상품 목록을 요청할 함수(비동기 함수)
    async function getProduct() {
      // url : API요청 주소
      // method : 요청 방법
      const config = {url: `${DOMAIN_NAME}/products`, method : "get"}
      const response = await axios(config);

      // 응답 데이터에서 data 속성 추출
      const data = response["data"];

      // data 객체에서 products 속성 추출
      const products = data["products"];

      // 배열 고차 메서드를 사용해서 배열 데이터인 products 를 반복
      products.forEach((element) => {
        // 매개변수 element : 배열에 저장된 개별 상품 객체
        // 상품(element) 정보에서 이름(title) 속성 추출
        const title = element["title"];

        // p 태그 요소 생성
        const pTag = document.createElement("p");
        // p 태그 요소의 텍스트를 상품의 이름으로 설정
        pTag["textContent"] = title;

        // #parent 인 요소에 p 태그 추가(append())
        parentTag.append(pTag);
      });

      console.table(data);
    }
    getProduct();

    // 태그명이 button인 요소의 click 이벤트가 발생했을 때
    // 함수 getproducts 가 호출 코드 작성
    const buttonTag = document.querySelector("button");
    buttonTag.addEventListener("click", () => {
      getProducts();
    });
    // 1. 태그명이 button인 요소를 선택(querySelector)
    // 2. 요소를 변수에 할당(저장)
    // 3. addEventListenner() 메서드로 요소에 click 이벤트에 대한 헨들러 등록



    async function testConnect() {
      // 요청 주소 => url
      // 요청 방법 => method
      const config = {url:`${DOMAIN_NAME}/test`, method: "get"};

      // axios를 활용해서 요청(클라이언트 -> 서버)
      // 요청에 대한 응답을 변수 response에 저장
      const response = await axios(config);
      console.log(response["data"]);
    }
    // testConnect();

    
  </script>
</body>
</html>